<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dashboard{% endblock %} - SanaSend</title>
    {% load static %}
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: 'rgb(240 253 250)',
                            100: 'rgb(204 251 241)',
                            200: 'rgb(153 246 228)',
                            300: 'rgb(102 240 214)',
                            400: 'rgb(45 212 191)',
                            500: 'rgb(0 201 167)',
                            600: 'rgb(0 180 149)',
                            700: 'rgb(0 159 131)',
                            800: 'rgb(0 138 113)',
                            900: 'rgb(0 117 95)',
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Unfold-inspired design system */
        :root {
            --primary-50: rgb(240 253 250);
            --primary-100: rgb(204 251 241);
            --primary-200: rgb(153 246 228);
            --primary-300: rgb(102 240 214);
            --primary-400: rgb(45 212 191);
            --primary-500: rgb(0 201 167);
            --primary-600: rgb(0 180 149);
            --primary-700: rgb(0 159 131);
            --primary-800: rgb(0 138 113);
            --primary-900: rgb(0 117 95);
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        
        .qr-code-container {
            max-width: 300px;
            margin: 0 auto;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .pulse-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        
        .sidebar {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
        }
        
        .sidebar-mobile {
            transform: translateX(-100%);
        }
        
        .sidebar-mobile.open {
            transform: translateX(0);
        }
        
        .nav-link {
            transition: all 0.15s ease-in-out;
        }
        
        .nav-link:hover {
            background: var(--primary-50);
            transform: translateX(2px);
        }
        
        .nav-link.active {
            background: linear-gradient(135deg, var(--primary-50) 0%, var(--primary-100) 100%);
            border-left: 3px solid var(--primary-600);
            font-weight: 600;
            color: var(--primary-700);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-700) 100%);
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            transition: all 0.15s ease-in-out;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-700) 0%, var(--primary-800) 100%);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transform: translateY(-1px);
        }
        
        .card {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            transition: all 0.2s ease-in-out;
        }
        
        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .user-tag {
            background: linear-gradient(135deg, var(--primary-600), var(--primary-500));
            color: white;
            padding: 3px 10px;
            border-radius: 9999px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: #111827;
            letter-spacing: -0.025em;
        }
        
        .page-subtitle {
            color: #6b7280;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-50 antialiased">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="sidebar fixed inset-y-0 left-0 z-50 w-64 shadow-2xl sidebar-mobile lg:translate-x-0 border-r border-gray-100" id="sidebar">
            <div class="flex flex-col h-full">
                <!-- Logo -->
                <div class="flex items-center justify-center h-16 px-4 border-b border-gray-100 bg-white">
                    <i class="fas fa-comments text-2xl mr-2" style="color: var(--primary-600);"></i>
                    <span class="text-xl font-bold tracking-tight" style="color: var(--primary-800);">SanaSend</span>
                </div>
                
                <!-- Navigation -->
                <nav class="flex-1 px-3 py-6 space-y-1 overflow-y-auto">
                    <div class="mb-4">
                        <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Main</p>
                    </div>
                    <a href="{% url 'dashboard:home' %}" class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-dashboard mr-3 w-5 text-base"></i>
                        Dashboard
                    </a>
                    <a href="{% url 'dashboard:sessions' %}" class="nav-link {% if request.resolver_match.url_name == 'sessions' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-link mr-3 w-5 text-base"></i>
                        Sessions
                    </a>
                    <a href="{% url 'dashboard:messages' %}" class="nav-link {% if request.resolver_match.url_name == 'messages' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-message mr-3 w-5 text-base"></i>
                        Messages
                    </a>
                    
                    <div class="mt-6 mb-4">
                        <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Developer</p>
                    </div>
                    <a href="{% url 'dashboard:api_keys' %}" class="nav-link {% if request.resolver_match.url_name == 'api_keys' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-key mr-3 w-5 text-base"></i>
                        API Keys
                    </a>
                    <a href="{% url 'dashboard:test_sample' %}" class="nav-link {% if request.resolver_match.url_name == 'test_sample' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-flask mr-3 w-5 text-base"></i>
                        Test API
                    </a>
                    
                    {% if user.is_staff %}
                    <div class="mt-6 mb-4">
                        <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Admin</p>
                    </div>
                    <a href="{% url 'dashboard:service_status' %}" class="nav-link {% if request.resolver_match.url_name == 'service_status' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-server mr-3 w-5 text-base"></i>
                        Service Status
                    </a>
                    {% endif %}
                    
                    <div class="mt-6 mb-4">
                        <p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider">Account</p>
                    </div>
                    <a href="{% url 'dashboard:profile' %}" class="nav-link {% if request.resolver_match.url_name == 'profile' %}active{% endif %} flex items-center px-3 py-2.5 rounded-lg text-sm text-gray-700">
                        <i class="fas fa-user mr-3 w-5 text-base"></i>
                        Profile
                    </a>
                </nav>
                
                <!-- User Info -->
                <div class="border-t border-gray-100 p-4 bg-white">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center min-w-0 flex-1">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background: var(--primary-100);">
                                    <i class="fas fa-user text-base" style="color: var(--primary-700);"></i>
                                </div>
                            </div>
                            <div class="ml-3 min-w-0 flex-1">
                                <p class="text-sm font-semibold text-gray-900 truncate">{{ user.username }}</p>
                                <span class="user-tag">User</span>
                            </div>
                        </div>
                        <a href="{% url 'dashboard:logout' %}" class="ml-2 text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile overlay -->
        <div class="fixed inset-0 z-40 bg-gray-600 bg-opacity-75 hidden" id="sidebar-overlay"></div>
        
        <!-- Main content -->
        <div class="flex-1 flex flex-col lg:ml-64 overflow-x-hidden">
            <!-- Mobile header -->
            <div class="lg:hidden bg-white shadow-sm border-b border-gray-100 flex-shrink-0">
                <div class="flex items-center justify-between h-16 px-4">
                    <button onclick="toggleSidebar()" class="text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-100 rounded-lg transition-colors">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div class="flex items-center">
                        <i class="fas fa-comments text-xl mr-2" style="color: var(--primary-600);"></i>
                        <span class="text-lg font-bold tracking-tight" style="color: var(--primary-800);">SanaSend</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="user-tag hidden sm:inline-block">{{ user.username }}</span>
                        <a href="{% url 'dashboard:logout' %}" class="text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-100 rounded-lg transition-colors" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Messages -->
            {% if messages %}
            <div class="px-4 sm:px-6 lg:px-8 mt-4 flex-shrink-0">
                {% for message in messages %}
                <div class="{% if message.tags == 'error' %}bg-red-50 border-red-200 text-red-800{% elif message.tags == 'success' %}bg-green-50 border-green-200 text-green-800{% else %}bg-blue-50 border-blue-200 text-blue-800{% endif %} px-4 py-3 rounded-lg mb-3 border shadow-sm flex items-start gap-3" role="alert">
                    <i class="{% if message.tags == 'error' %}fas fa-circle-exclamation text-red-500{% elif message.tags == 'success' %}fas fa-circle-check text-green-500{% else %}fas fa-circle-info text-blue-500{% endif %} mt-0.5"></i>
                    <span class="flex-1 text-sm font-medium">{{ message }}</span>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Content -->
            <main class="flex-1 px-4 sm:px-6 lg:px-8 py-8">
                {% block content %}{% endblock %}
            </main>

            <!-- Footer -->
            <footer class="bg-white mt-auto flex-shrink-0 border-t border-gray-100">
                <div class="px-4 sm:px-6 lg:px-8 py-6">
                    <div class="flex items-center justify-between">
                        <p class="text-gray-500 text-sm">
                            &copy; 2024 SanaSend. All rights reserved.
                        </p>
                        <div class="flex items-center gap-4 text-xs text-gray-400">
                            <span>SanaSend</span>
                            <span>v1.0.0</span>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }
        
        // Close sidebar when clicking overlay
        document.getElementById('sidebar-overlay').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            sidebar.classList.remove('open');
            overlay.classList.add('hidden');
        });
        
        // Close sidebar on escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebar-overlay');
                
                sidebar.classList.remove('open');
                overlay.classList.add('hidden');
            }
        });
    </script>
</body>
</html>


